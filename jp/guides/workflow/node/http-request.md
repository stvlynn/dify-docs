# HTTPリクエスト

### 定義

HTTP プロトコルを介してサーバーにリクエストを送信することを可能にし、外部データの取得、ウェブフック、画像生成、ファイルのダウンロードなどのシナリオに適用されます。指定されたネットワークアドレスにカスタマイズされたHTTPリクエストを送信し、さまざまな外部サービスとの連携を実現します。

このノードは一般的なHTTPリクエストメソッドをサポートしています：

* **GET**、リソースをサーバーにリクエストするために使用されます。
* **POST**、データをサーバーに送信するために使用され、通常はフォームの送信やファイルのアップロードに使用されます。
* **HEAD**、GETリクエストに似ていますが、サーバーはリソースの本体を返さず、レスポンスヘッダーのみを返します。
* **PATCH**、リクエスト-レスポンスチェーンの各ノードで伝送経路を取得するために使用されます。
* **PUT**、リソースをサーバーにアップロードするために使用され、通常は既存のリソースの更新や新しいリソースの作成に使用されます。
* **DELETE**、指定されたリソースをサーバーに削除するようにリクエストするために使用されます。

HTTPリクエストのURL、リクエストヘッダー、クエリパラメータ、リクエストボディの内容、および認証情報などを設定することができます。

<figure><img src="https://assets-docs.dify.ai//img/jp/node/c1600a6ede365dc135c769a8da80b05e.webp" alt="" width="332"><figcaption><p>HTTP リクエスト設定</p></figcaption></figure>

***

### シナリオ

* **アプリケーションからサーバーへの対話型コンテンツの送信**

HTTPリクエストにおいて、ユーザー名や顧客ID、フィードバック内容など、様々な動的な変数を挿入することが可能です。たとえば、顧客のフィードバックを扱う際に、これらの変数を使用して自動返信メッセージをパーソナライズしたり、特定の顧客データを取得してそれに関連する情報を特定のサーバーに送信したりすることができます。

<figure><img src="https://assets-docs.dify.ai//img/jp/node/6fd7767fcb3123e72dcb69746e4f9514.webp" alt=""><figcaption><p>顧客のフィードバック分類</p></figcaption></figure>

HTTPリクエストのレスポンスには、レスポンスボディ、ステータスコード、レスポンスヘッダー、そしてファイルが含まれることがあります。特にレスポンスにファイルが含まれる場合、この機能は自動的にファイルを保存し、後のプロセスステップでの利用を可能にします。これにより、処理効率が向上し、ファイルを含むレスポンスをより直接的かつ容易に扱えるようになります。

* **ファイルの送信**

HTTP PUTリクエストを利用して、アプリケーション内のファイルを他のAPIサービスへ送信することができます。リクエストのボディ内で、`binary`オプションからファイル変数を選択することにより、ファイル転送、文書の保存、メディアの処理など、様々な場面でこの方法が活用されます。

例えば、文書管理アプリケーションを開発中に、ユーザーがアップロードしたPDFファイルを外部サービスに同期し、送信する必要がある場合、HTTPリクエスト機能を用いてファイル変数を送信することが可能です。

設定の一例は以下のとおりです：

<figure><img src="https://assets-docs.dify.ai//img/jp/node/3ff1415b8333effed1b449813f962460.webp" alt=""><figcaption><p>HTTP機能を使ってファイルを送信する方法</p></figcaption></figure>

<最初の翻訳の問題点の改善ポイント>
この再翻訳では、日本語の表現习慣に合わせ、より自然で明瞭な表現を心がけました。具体的な専門用語やプロセスの説明も、より分かりやすく説明するよう努めています。このように、原文の意味を正確に伝えつつ、読みやすさも重視した翻訳を目指しました。

### 高級機能

**失敗後の再試行**

ノードで起きる例外的な状況の中には、そのノードをもう一度試すだけで対応できるものがあります。エラーが発生した際に自動的に再試行をする機能が有効になっていれば、事前に設定された方針に従って再試行が行われます。再試行の最大回数や再試行間の時間を調整することで、再試行の方針を設定することが可能です。

- 再試行は最大で10回まで可能です
- 再試行の間隔は最長で5秒まで設定できます

![](https://assets-docs.dify.ai/2024/12/2e7c6080c0875e31a074c2a9a4543797.png)

**エラー処理**

HTTPノードが情報を処理する過程で、ネットワークのリクエストがタイムアウトしたり、リクエストの制限に遭遇したりするなど、予期せぬエラー状況が発生することがあります。アプリケーションの開発者は、エラーが生じた際にプロセスが中断されないように、下記の手順に沿ってエラー処理の設定を行うことで、これらの問題に対処できます。

1. HTTPノードで「エラー処理」機能を有効化する。
2. 必要に応じて、具体的なエラー処理の対策を選択し、設定する。

エラー処理の具体的な方法についてさらに知りたい場合は、[こちらのエラー処理ガイド](../error-handling/README.md)を参照してください。

![](https://assets-docs.dify.ai/2024/12/91daa86d9770390ab2a41d6d0b6ed1e7.png)